<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDB Sentinel APEX v7.4 | Tactical Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #050505; color: #e5e5e5; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); }
        .amber-glow { border-left: 4px solid #ffbf00; background: linear-gradient(90deg, rgba(255,191,0,0.05) 0%, transparent 100%); }
        .clear-glow { border-left: 4px solid #00d4aa; background: linear-gradient(90deg, rgba(0,212,170,0.05) 0%, transparent 100%); }
    </style>
</head>
<body class="p-6 md:p-12">
    <header class="max-w-7xl mx-auto flex justify-between items-center mb-12">
        <div>
            <h1 class="text-4xl font-black italic tracking-tighter text-white">SENTINEL<span class="text-[#00d4aa]">APEX</span></h1>
            <p class="text-[10px] uppercase tracking-[0.4em] text-white/30">Autonomous CyberDudeBivash Intelligence</p>
        </div>
        <div id="status" class="glass px-6 py-3 rounded-full text-[10px] font-bold uppercase tracking-widest text-[#00d4aa]">
            <i class="fas fa-circle animate-pulse mr-2"></i> GOC Engine: Online
        </div>
    </header>

    <section class="max-w-7xl mx-auto mb-12">
        <div class="glass rounded-3xl p-8">
            <h2 class="text-xs font-black uppercase tracking-widest mb-6 text-white/40">Tactical Heatmap</h2>
            <div id="mitre-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3"></div>
        </div>
    </section>

    <section class="max-w-7xl mx-auto">
        <div class="glass rounded-3xl overflow-hidden">
            <table class="w-full text-left">
                <thead class="bg-white/5 text-[10px] font-black uppercase tracking-widest text-white/30">
                    <tr><th class="p-6">Intelligence Node</th><th class="p-6">TLP / Risk</th><th class="p-6">Assets</th><th class="p-6 text-right">Actions</th></tr>
                </thead>
                <tbody id="feed-body" class="text-sm"></tbody>
            </table>
        </div>
    </section>

    <script>
        async function init() {
            const res = await fetch('data/stix/feed_manifest.json');
            const data = await res.json();
            
            // 1. Render MITRE Heatmap
            const grid = document.getElementById('mitre-grid');
            const allTactics = ["Initial Access", "Execution", "Persistence", "Privilege Escalation", "Defense Evasion", "Credential Access", "Discovery", "Lateral Movement", "Command and Control", "Exfiltration", "Impact"];
            allTactics.forEach(t => {
                const active = data.active_tactics.includes(t);
                grid.insertAdjacentHTML('beforeend', `
                    <div class="p-4 rounded-xl border ${active ? 'border-[#00d4aa] text-[#00d4aa]' : 'border-white/5 text-white/10'} text-center transition-all duration-700">
                        <i class="fas ${active ? 'fa-fire' : 'fa-shield'} mb-2"></i>
                        <p class="text-[8px] font-bold uppercase">${t}</p>
                    </div>
                `);
            });

            // 2. Render Table
            const body = document.getElementById('feed-body');
            data.files.forEach(f => {
                const glowClass = f.tlp === 'AMBER' ? 'amber-glow' : 'clear-glow';
                const riskColor = f.risk_score >= 7.0 ? 'text-yellow-500' : 'text-[#00d4aa]';
                
                body.insertAdjacentHTML('beforeend', `
                    <tr class="hover:bg-white/5 transition border-b border-white/5 ${glowClass}">
                        <td class="p-6">
                            <span class="font-bold text-white/80">${f.name}</span>
                            <div class="text-[9px] text-white/20 mt-1 uppercase">${f.tactics.join(' â€¢ ') || 'General Triage'}</div>
                        </td>
                        <td class="p-6 font-black ${riskColor}">${f.tlp} <span class="text-white/20 ml-2">(${f.risk_score})</span></td>
                        <td class="p-6">
                            ${f.pdf ? `<a href="data/whitepapers/${f.pdf}" class="text-[#00d4aa] hover:underline"><i class="fas fa-file-pdf mr-2"></i>Advisory</a>` : '<span class="text-white/10 italic">N/A</span>'}
                        </td>
                        <td class="p-6 text-right">
                            <a href="data/stix/${f.name}" class="px-4 py-2 bg-white/5 hover:bg-white hover:text-black rounded-lg text-[10px] font-black transition">STIX 2.1</a>
                        </td>
                    </tr>
                `);
            });
        }
        init();
    </script>
</body>
</html>
