<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDB Sentinel APEX v6.0 | Global Command Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://simplemaps.com/static/js/worldmap.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #e5e5e5; overflow-x: hidden; }
        .cyber-grid { background-image: radial-gradient(#1a1a1a 1px, transparent 1px); background-size: 30px 30px; }
        .glow-teal { box-shadow: 0 0 20px rgba(0, 212, 170, 0.2); }
        .glow-red { box-shadow: 0 0 25px rgba(239, 68, 68, 0.4); }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .terminal-font { font-family: 'JetBrains Mono', monospace; }
        #aboutModal { display: none; }
        #aboutModal.active { display: flex; }
        #map { min-height: 450px; }
    </style>
</head>
<body class="cyber-grid min-h-screen">

    <nav class="border-b border-white/10 bg-black/80 backdrop-blur-xl sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center space-x-4">
                <div class="w-10 h-10 bg-[#00d4aa] rounded-lg flex items-center justify-center text-black font-black glow-teal cursor-pointer" onclick="toggleModal(true)">CDB</div>
                <div class="border-l-2 border-[#00d4aa] pl-4">
                    <span class="font-black tracking-tighter text-lg leading-none block">CyberDudeBivash <span class="text-[#00d4aa]">Pvt. Ltd.</span></span>
                    <a href="https://www.cyberdudebivash.com" target="_blank" class="text-[9px] text-white/40 hover:text-[#00d4aa] font-bold tracking-widest uppercase transition">www.cyberdudebivash.com</a>
                </div>
            </div>
            
            <div class="hidden lg:flex items-center space-x-3 bg-white/5 border border-white/10 px-4 py-2 rounded-lg terminal-font">
                <span id="heartbeat-dot" class="w-2 h-2 bg-[#00d4aa] rounded-full animate-pulse"></span>
                <span id="pulse-text" class="text-[10px] text-white/60 uppercase">System: Scanning Global Vectors...</span>
            </div>

            <div class="flex items-center space-x-6">
                <a href="mailto:support@cyberdudebivash.com" class="text-white/40 text-[10px] font-black uppercase hover:text-white transition">Support</a>
                <a href="https://cyberbivash.blogspot.com" target="_blank" class="bg-[#00d4aa] text-black px-5 py-2 rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-white transition glow-teal">Live SITREPs</a>
            </div>
        </div>
    </nav>

    <section class="max-w-7xl mx-auto px-6 pt-12 pb-6">
        <div class="glass rounded-[2.5rem] p-10 relative overflow-hidden group">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-black italic tracking-tighter">GLOBAL THREAT ORIGIN</h2>
                    <p class="text-[10px] text-white/30 uppercase tracking-[0.3em] font-bold mt-1">Geospatial Intelligence Attribution</p>
                </div>
                <div class="glass px-4 py-2 rounded-xl flex items-center space-x-3">
                    <span class="text-[10px] font-black text-white/40 uppercase">Top Origin:</span>
                    <span id="top-country" class="text-[#00d4aa] font-black text-xs uppercase tracking-widest">Scanning...</span>
                </div>
            </div>
            
            <div id="map" class="opacity-90 group-hover:opacity-100 transition duration-700"></div>
            
            <div class="absolute bottom-10 left-10 hidden md:block">
                <div class="glass p-4 rounded-2xl flex items-center space-x-4 border-l-4 border-l-[#00d4aa]">
                    <i class="fas fa-microchip text-[#00d4aa] text-xl animate-pulse"></i>
                    <div>
                        <p class="text-[9px] font-black text-white/40 uppercase">Map Status</p>
                        <p class="text-xs font-bold text-white/80 uppercase">AI Attribution Active</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="max-w-7xl mx-auto px-6 py-6 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div id="status-card" class="glass p-8 rounded-2xl border-b-4 border-b-[#00d4aa]">
            <p class="text-white/40 font-black text-[10px] uppercase tracking-widest mb-2">Engine Status</p>
            <h3 id="engine-status" class="text-3xl font-black italic">INITIALIZING</h3>
        </div>
        <div class="glass p-8 rounded-2xl border-b-4 border-b-white/10">
            <p class="text-white/40 font-black text-[10px] uppercase tracking-widest mb-2">Total Intelligence</p>
            <h3 id="total-nodes" class="text-3xl font-black">-- Triaged</h3>
        </div>
        <div id="risk-card" class="glass p-8 rounded-2xl border-b-4 border-b-orange-500">
            <p class="text-white/40 font-black text-[10px] uppercase tracking-widest mb-2">Risk Level</p>
            <h3 id="risk-posture" class="text-3xl font-black text-orange-500 italic uppercase italic">ELEVATED</h3>
        </div>
    </section>

    <section id="feed" class="max-w-7xl mx-auto px-6 py-12 pb-24">
        <h2 class="text-3xl font-black tracking-tighter italic mb-8 border-b border-white/10 pb-4">STIX 2.1 REPOSITORY</h2>
        <div class="glass rounded-3xl overflow-hidden shadow-2xl">
            <table class="w-full text-left">
                <thead class="bg-white/5 text-white/20 uppercase text-[9px] font-black tracking-widest">
                    <tr>
                        <th class="p-8">Intelligence Node</th>
                        <th class="p-8">Sync Date</th>
                        <th class="p-8 text-right">Actions</th>
                    </tr>
                </thead>
                <tbody id="threat-table-body" class="divide-y divide-white/5 font-medium text-sm">
                    <tr>
                        <td colspan="3" class="p-20 text-center terminal-font text-white/20">
                            <i class="fas fa-sync fa-spin mb-4 text-2xl text-[#00d4aa]"></i><br>
                            ESTABLISHING_SECURE_REPOSITORY_FETCH...
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <div id="aboutModal" class="fixed inset-0 z-[100] hidden items-center justify-center p-6 bg-black/95 backdrop-blur-md">
        <div class="glass max-w-xl w-full p-12 rounded-[2.5rem] relative">
            <button onclick="toggleModal(false)" class="absolute top-8 right-8 text-white/20 hover:text-white transition"><i class="fas fa-times"></i></button>
            <h2 class="text-4xl font-black italic mb-8 border-b-4 border-[#00d4aa] inline-block">OUR MISSION</h2>
            <div class="text-white/60 text-lg leading-relaxed font-medium">
                <p>CyberDudeBivash Sentinel APEX is an autonomous OSINT platform engineered by <strong>CyberDudeBivash Pvt. Ltd.</strong></p>
                <p class="mt-4">We provide 24/7 forensic triage, reputation enrichment via VirusTotal, and standardized STIX 2.1 data portability for global SOC operations.</p>
            </div>
            <div class="mt-12 pt-8 border-t border-white/10 flex justify-between items-center">
                <span class="text-[10px] font-black text-white/20 uppercase tracking-widest italic">Est. 2026 | Bengaluru, India</span>
                <a href="https://www.cyberdudebivash.com" target="_blank" class="bg-[#00d4aa] text-black px-6 py-3 rounded-full font-black text-[10px] uppercase tracking-widest">Visit Portal</a>
            </div>
        </div>
    </div>

    <script>
        const manifestUrl = 'data/stix/feed_manifest.json';
        
        function toggleModal(show) {
            const m = document.getElementById('aboutModal');
            m.classList.toggle('hidden', !show);
            m.classList.toggle('flex', show);
        }

        async function copyData(url) {
            try {
                const r = await fetch(url);
                const j = await r.json();
                await navigator.clipboard.writeText(JSON.stringify(j, null, 2));
                alert('STIX Node copied to clipboard.');
            } catch (e) { alert('Copy Failed.'); }
        }

        async function initCommandCenter() {
            const tableBody = document.getElementById('threat-table-body');
            const pulseText = document.getElementById('pulse-text');
            
            try {
                const res = await fetch(manifestUrl);
                if(!res.ok) throw new Error();
                const data = await res.json();
                
                // Update Dashboard
                document.getElementById('engine-status').innerText = 'OPERATIONAL';
                document.getElementById('engine-status').classList.add('text-[#00d4aa]');
                document.getElementById('total-nodes').innerText = `${data.total_nodes} Triaged`;
                pulseText.innerText = "SYSTEM: GOC-ENGINE ACTIVE";

                // Visual Risk Adjustment
                if (data.total_nodes > 15) {
                    document.getElementById('risk-card').classList.replace('border-b-orange-500', 'border-b-red-500');
                    document.getElementById('risk-posture').innerText = "CRITICAL";
                    document.getElementById('risk-posture').classList.replace('text-orange-500', 'text-red-500');
                    document.getElementById('heartbeat-dot').classList.replace('bg-[#00d4aa]', 'bg-red-500');
                }

                document.getElementById('top-country').innerText = "United States"; // Placeholder logic

                tableBody.innerHTML = '';
                data.files.forEach(file => {
                    const tsMatch = file.match(/\d+/);
                    const ts = tsMatch ? parseInt(tsMatch[0]) : Date.now()/1000;
                    const date = new Date(ts * 1000).toLocaleDateString();
                    
                    tableBody.insertAdjacentHTML('beforeend', `
                        <tr class="hover:bg-white/[0.03] transition group">
                            <td class="p-8">
                                <span class="font-bold text-white/80 group-hover:text-[#00d4aa] transition cursor-pointer">${file}</span>
                            </td>
                            <td class="p-8 text-white/20 font-mono text-xs uppercase">${date}</td>
                            <td class="p-8 text-right space-x-4">
                                <button onclick="copyData('data/stix/${file}')" class="text-white/20 hover:text-white transition text-[10px] font-black uppercase tracking-widest"><i class="fas fa-copy"></i></button>
                                <a href="data/stix/${file}" target="_blank" class="px-5 py-2.5 bg-white/5 hover:bg-white hover:text-black rounded-lg text-[10px] font-black uppercase tracking-widest transition">Ingest</a>
                            </td>
                        </tr>
                    `);
                });
            } catch (e) {
                tableBody.innerHTML = '<tr><td colspan="3" class="p-20 text-center text-white/10 uppercase font-black italic tracking-widest">Awaiting Repository Synchronisation...</td></tr>';
            }
        }

        window.onload = initCommandCenter;
    </script>
</body>
</html>
